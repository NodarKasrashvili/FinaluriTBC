{% extends "base.html" %}

{% block title %}áƒ›áƒ—áƒáƒ•áƒáƒ áƒ˜ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜ - áƒ—áƒ˜áƒ‘áƒ˜áƒ¡áƒ˜{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="text-center mb-4 text-white">ğŸ“¢ áƒ‘áƒáƒšáƒ áƒ¡áƒ˜áƒáƒ®áƒšáƒ”áƒ”áƒ‘áƒ˜</h2>
        
        <!-- áƒ¤áƒ˜áƒšáƒ¢áƒ áƒáƒªáƒ˜áƒ áƒ™áƒáƒ¢áƒ”áƒ’áƒáƒ áƒ˜áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ®áƒ”áƒ“áƒ•áƒ˜áƒ— -->
        <div class="text-center mb-4">
            <div class="btn-group flex-wrap" role="group">
                <a href="{{ url_for('index', category='all') }}" 
                   class="btn btn-outline-light {% if current_category == 'all' %}active{% endif %}">
                    áƒ§áƒ•áƒ”áƒšáƒ
                </a>
                <a href="{{ url_for('index', category='áƒáƒáƒšáƒ˜áƒ¢áƒ˜áƒ™áƒ') }}" 
                   class="btn btn-outline-light {% if current_category == 'áƒáƒáƒšáƒ˜áƒ¢áƒ˜áƒ™áƒ' %}active{% endif %}">
                    áƒáƒáƒšáƒ˜áƒ¢áƒ˜áƒ™áƒ
                </a>
                <a href="{{ url_for('index', category='áƒ”áƒ™áƒáƒœáƒáƒ›áƒ˜áƒ™áƒ') }}" 
                   class="btn btn-outline-light {% if current_category == 'áƒ”áƒ™áƒáƒœáƒáƒ›áƒ˜áƒ™áƒ' %}active{% endif %}">
                    áƒ”áƒ™áƒáƒœáƒáƒ›áƒ˜áƒ™áƒ
                </a>
                <a href="{{ url_for('index', category='áƒ¢áƒ”áƒ¥áƒœáƒáƒšáƒáƒ’áƒ˜áƒ”áƒ‘áƒ˜') }}" 
                   class="btn btn-outline-light {% if current_category == 'áƒ¢áƒ”áƒ¥áƒœáƒáƒšáƒáƒ’áƒ˜áƒ”áƒ‘áƒ˜' %}active{% endif %}">
                    áƒ¢áƒ”áƒ¥áƒœáƒáƒšáƒáƒ’áƒ˜áƒ”áƒ‘áƒ˜
                </a>
                <a href="{{ url_for('index', category='áƒ¡áƒáƒáƒ áƒ¢áƒ˜') }}" 
                   class="btn btn-outline-light {% if current_category == 'áƒ¡áƒáƒáƒ áƒ¢áƒ˜' %}active{% endif %}">
                    áƒ¡áƒáƒáƒ áƒ¢áƒ˜
                </a>
                <a href="{{ url_for('index', category='áƒ™áƒ£áƒšáƒ¢áƒ£áƒ áƒ') }}" 
                   class="btn btn-outline-light {% if current_category == 'áƒ™áƒ£áƒšáƒ¢áƒ£áƒ áƒ' %}active{% endif %}">
                    áƒ™áƒ£áƒšáƒ¢áƒ£áƒ áƒ
                </a>
            </div>
        </div>
    </div>
</div>

<!-- áƒ¡áƒ˜áƒáƒ®áƒšáƒ”áƒ”áƒ‘áƒ˜áƒ¡ Grid -->
<div class="row g-4">
    {% if news_list %}
        {% for news in news_list %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-lg news-card">
                <!-- áƒ¤áƒáƒ¢áƒ áƒ—áƒ£ áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡ -->
                {% if news.image_filename %}
                <img src="{{ url_for('static', filename='uploads/' + news.image_filename) }}" 
                     class="card-img-top" 
                     alt="{{ news.title }}"
                     style="height: 200px; object-fit: cover;">
                {% else %}
                <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" 
                     style="height: 200px;">
                    <span class="display-1 text-white">ğŸ“°</span>
                </div>
                {% endif %}
                
                <div class="card-header bg-gradient text-white">
                    <span class="badge bg-light text-primary">{{ news.category }}</span>
                </div>
                
                <div class="card-body">
                    <h5 class="card-title">{{ news.title }}</h5>
                    <p class="card-text text-muted">
                        {{ news.content[:150] }}{% if news.content|length > 150 %}...{% endif %}
                    </p>
                    <div class="small text-muted mt-3">
                        <div>âœï¸ {{ news.author.username }}</div>
                        <div>ğŸ“… {{ news.created_at.strftime('%Y áƒ¬áƒšáƒ˜áƒ¡ %d %B, %H:%M') }}</div>
                    </div>
                </div>
                
                {% if current_user.is_authenticated and (current_user.is_admin or news.user_id == current_user.id) %}
                <div class="card-footer bg-transparent">
                    <form action="{{ url_for('delete_news', id=news.id) }}" method="POST" onsubmit="return confirm('áƒ“áƒáƒ áƒ¬áƒ›áƒ£áƒœáƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ®áƒáƒ áƒ— áƒ áƒáƒ› áƒ’áƒ¡áƒ£áƒ áƒ— áƒ¬áƒáƒ¨áƒšáƒ?')">
                        <button type="submit" class="btn btn-danger btn-sm w-100">
                            ğŸ—‘ï¸ áƒ¬áƒáƒ¨áƒšáƒ
                        </button>
                    </form>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="col-12">
            <div class="alert alert-info text-center" role="alert">
                <h4>ğŸ“­ áƒ¡áƒ˜áƒáƒ®áƒšáƒ”áƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡</h4>
                <p class="mb-0">
                    {% if current_user.is_authenticated %}
                        <a href="{{ url_for('add_news') }}" class="btn btn-primary mt-2">áƒ“áƒáƒáƒ›áƒáƒ¢áƒ” áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ¡áƒ˜áƒáƒ®áƒšáƒ”</a>
                    {% else %}
                        <a href="{{ url_for('login') }}" class="btn btn-primary mt-2">áƒ¨áƒ”áƒ“áƒ˜áƒ— áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒáƒ¨áƒ˜ áƒ¡áƒ˜áƒáƒ®áƒšáƒ˜áƒ¡ áƒ“áƒáƒ¡áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒšáƒáƒ“</a>
                    {% endif %}
                </p>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<style>
.news-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-left: 4px solid #00AEEF;
    overflow: hidden;
}
.news-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(0,0,0,0.25) !important;
}
.news-card:hover .card-img-top {
    transform: scale(1.05);
}
.card-img-top {
    transition: transform 0.3s ease;
}
.bg-gradient {
    background: linear-gradient(135deg, #00AEEF 0%, #0066B3 100%);
}
</style>
{% endblock %}